<div class="game-container">
  <h1>Number Crunch</h1>
  <p class="game-description">
    A strategic number puzzle game - select rectangular groups that sum to the target!
  </p>

  <div class="game-area">
    <div class="game-board">
      <div class="mute-controls">
        <button class="mute-btn" (click)="toggleMute()">
          {{ settings.muted ? 'ğŸ”Š' : 'ğŸ”‡' }}
        </button>
      </div>
      <canvas #gameCanvas class="game-canvas" tabindex="0"></canvas>

      <!-- Hidden input for mobile keyboard support -->
      <input
        #mobileInput
        type="text"
        dir="ltr"
        inputmode="text"
        lang="en"
        autocapitalize="off"
        autocomplete="off"
        class="mobile-input"
        maxlength="10"
        [class.active]="currentState === 'leaderboard_name_input'"
        [style.left.px]="getMobileInputPosition().left"
        [style.top.px]="getMobileInputPosition().top"
        [style.width.px]="getMobileInputPosition().width"
        [style.height.px]="getMobileInputPosition().height"
        [value]="leaderboardNameInput"
        (beforeinput)="onMobileInputBeforeInput($event)"
        (input)="onMobileInputChange($event)"
        (focus)="onMobileInputFocus()"
        (blur)="onMobileInputBlur()"
      />

      <div class="game-controls" *ngIf="currentState === 'playing'">
        <button class="restart-btn" (click)="restartGame()">Restart Game</button>
      </div>
    </div>

    <div class="game-info">
      <h3>How to Play:</h3>
      <ul>
        <li>Click and drag to select a rectangular group of numbers</li>
        <li>The selected numbers must sum to the target value</li>
        <li>Successful matches deal damage to the enemy</li>
        <li>Use the Scramble button to reorganize remaining tiles (limited use)</li>
        <li>Defeat the enemy before it defeats you!</li>
      </ul>

      <div class="game-stats">
        <h4>Game Mechanics:</h4>
        <ul>
          <li><strong>Selection:</strong> Click and drag for rectangular selection</li>
          <li><strong>Matching:</strong> Sum must equal target number</li>
          <li><strong>Damage:</strong> Damage dealt is based on number of tiles matched</li>
          <li>
            <strong>Levels:</strong> Progress through levels with increasingly difficult targets
          </li>
          <li><strong>Time Pressure:</strong> Enemy attacks every 4 seconds</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="back-button">
    <a routerLink="/projects" class="back-link">â† Back to Projects</a>
  </div>
</div>
